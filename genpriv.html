<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuantumGen Pro - Gerador de Cartões 3D Avançado</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&family=Dancing+Script:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6c5ce7;
            --primary-light: #a29bfe;
            --secondary: #3d348b;
            --success: #00b894;
            --danger: #d63031;
            --warning: #fdcb6e;
            --dark: #121212;
            --darker: #0a0a0a;
            --light: #f5f6fa;
            --white: #ffffff;
            --gray: #636e72;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            
            --gradient: linear-gradient(135deg, var(--primary), var(--primary-light));
            --gradient-dark: linear-gradient(135deg, var(--secondary), var(--primary));
            --shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
            --card-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
            --transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            --border-radius: 20px;
            --blur: blur(15px);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--darker);
            color: var(--light);
            line-height: 1.7;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            transition: var(--transition);
        }
        
        body.light-mode {
            background-color: #f8f9fa;
            color: var(--dark);
            --glass: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            --card-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }
        
        /* Header */
        header {
            text-align: center;
            margin-bottom: 4rem;
            position: relative;
            animation: fadeIn 0.8s ease-out;
            z-index: 10;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        .logo {
            font-size: 4rem;
            font-weight: 800;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 1rem;
            letter-spacing: -2px;
            position: relative;
            display: inline-block;
            text-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
        }
        
        .logo::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 5px;
            background: var(--gradient);
            border-radius: 3px;
            filter: blur(3px);
        }
        
        .logo-badge {
            position: absolute;
            top: -15px;
            right: -30px;
            background: var(--gradient);
            color: white;
            font-size: 0.8rem;
            padding: 0.3rem 1rem;
            border-radius: 50px;
            font-weight: 700;
            transform: rotate(15deg);
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4);
            animation: float 4s ease-in-out infinite;
        }
        
        .subtitle {
            color: var(--gray);
            font-weight: 400;
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.2rem;
            line-height: 1.8;
            background: var(--glass);
            backdrop-filter: var(--blur);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow);
        }
        
        /* Generator Section */
        .generator-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 3rem;
            margin-bottom: 4rem;
        }
        
        .generator-card {
            background: var(--glass);
            backdrop-filter: var(--blur);
            border-radius: var(--border-radius);
            padding: 3rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--glass-border);
            z-index: 5;
        }
        
        .generator-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: var(--gradient);
        }
        
        .generator-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--card-shadow);
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            color: var(--primary-light);
            margin-bottom: 2.5rem;
            font-size: 1.6rem;
            font-weight: 600;
        }
        
        .card-title i {
            font-size: 2.2rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        /* Form Elements */
        .form-group {
            margin-bottom: 2rem;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 1rem;
            font-weight: 500;
            color: var(--light);
            font-size: 1rem;
        }
        
        body.light-mode label {
            color: var(--dark);
        }
        
        select, input {
            width: 100%;
            padding: 1.2rem 1.5rem;
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            font-size: 1.1rem;
            transition: var(--transition);
            background: var(--glass);
            backdrop-filter: var(--blur);
            font-family: 'JetBrains Mono', monospace;
            color: var(--light);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        /* Correção para as setas dos selects */
        select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23a29bfe' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 1.5rem center;
            background-size: 1.2rem;
            padding-right: 3.5rem;
        }
        
        body.light-mode select {
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%236c5ce7' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        }
        
        body.light-mode select,
        body.light-mode input {
            color: var(--dark);
            background: rgba(255, 255, 255, 0.8);
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.3);
        }
        
        .input-row {
            display: flex;
            gap: 2rem;
        }
        
        .input-row .form-group {
            flex: 1;
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            padding: 1.3rem 2.5rem;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 1.1rem;
            font-family: 'Poppins', sans-serif;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }
        
        .btn-sm {
            padding: 0.8rem 1.5rem;
            font-size: 0.9rem;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255,255,255,0.3), rgba(255,255,255,0));
            opacity: 0;
            transition: var(--transition);
            z-index: -1;
        }
        
        .btn:hover::before {
            opacity: 1;
        }
        
        .btn-primary {
            background: var(--gradient);
            color: var(--white);
        }
        
        .btn-primary:hover {
            background: var(--gradient-dark);
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(108, 92, 231, 0.5);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-success {
            background-color: var(--success);
            color: var(--white);
        }
        
        .btn-success:hover {
            background-color: #00a884;
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 184, 148, 0.5);
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: var(--dark);
        }
        
        .btn-warning:hover {
            background-color: #fcb747;
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(253, 203, 110, 0.5);
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: var(--white);
        }
        
        .btn-danger:hover {
            background-color: #c02a2a;
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(214, 48, 49, 0.5);
        }
        
        /* 3D Card Preview */
        .card-preview-container {
            perspective: 1200px;
            margin-bottom: 4rem;
            display: none;
            position: relative;
            max-width: 550px;
            margin: 0 auto 4rem;
        }
        
        .card-preview {
            width: 100%;
            height: 340px;
            margin: 0 auto;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border-radius: 25px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
            cursor: pointer;
            transform: rotateY(0deg) rotateX(0deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 25px;
            padding: 2.5rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background: linear-gradient(135deg, #3a0ca3, #4361ee);
            color: white;
            overflow: hidden;
        }
        
        .card-front::before, .card-back::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
            pointer-events: none;
        }
        
        .card-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, #4361ee, #3a0ca3);
        }
        
        .card-logo {
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 2;
        }
        
        .card-chip {
            width: 60px;
            height: 45px;
            background: linear-gradient(135deg, #ffd700, #c0c0c0);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .card-chip i {
            color: rgba(0, 0, 0, 0.5);
            font-size: 1.8rem;
        }
        
        .card-number-preview {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            letter-spacing: 3px;
            margin: 2rem 0;
            word-spacing: 1.5rem;
            text-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
            z-index: 2;
        }
        
        .card-details-preview {
            display: flex;
            justify-content: space-between;
            z-index: 2;
        }
        
        .card-label {
            font-size: 0.7rem;
            opacity: 0.8;
            margin-bottom: 0.3rem;
            letter-spacing: 1px;
        }
        
        .card-value {
            font-size: 1.1rem;
            font-weight: 500;
            letter-spacing: 1px;
        }
        
        .card-cvv {
            background: white;
            color: #333;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            text-align: right;
            margin-top: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 2;
        }
        
        .card-magnetic-stripe {
            height: 50px;
            background: linear-gradient(90deg, #222, #444, #222);
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .card-magnetic-stripe::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255,255,255,0.2), 
                transparent);
            animation: stripeShine 3s infinite linear;
        }
        
        @keyframes stripeShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .card-signature {
            height: 40px;
            background: #f5f5f5;
            color: #333;
            display: flex;
            align-items: center;
            padding-left: 1rem;
            margin-bottom: 1.5rem;
            position: relative;
            font-family: 'Dancing Script', cursive;
            font-size: 1.2rem;
            z-index: 2;
        }
        
        .card-signature::before {
            content: 'AUTHORIZED SIGNATURE';
            position: absolute;
            bottom: -20px;
            left: 0;
            font-size: 0.6rem;
            font-family: 'Poppins', sans-serif;
            color: white;
            opacity: 0.7;
        }
        
        .card-hologram {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 40px;
            background: linear-gradient(45deg, 
                rgba(255,0,0,0.5), 
                rgba(0,255,0,0.5), 
                rgba(0,0,255,0.5));
            border-radius: 5px;
            opacity: 0.8;
            z-index: 1;
        }
        
        /* Results Section */
        .results {
            background: var(--glass);
            backdrop-filter: var(--blur);
            border-radius: var(--border-radius);
            padding: 3rem;
            box-shadow: var(--shadow);
            margin-bottom: 4rem;
            border: 1px solid var(--glass-border);
            position: relative;
            overflow: hidden;
        }
        
        .results::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3rem;
            flex-wrap: wrap;
            gap: 2rem;
        }
        
        .section-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-light);
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .section-title i {
            font-size: 2.2rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .action-buttons {
            display: flex;
            gap: 1.5rem;
        }
        
        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2.5rem;
        }
        
        .credit-card {
            background: var(--glass);
            backdrop-filter: var(--blur);
            border-radius: var(--border-radius);
            padding: 2.5rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--glass-border);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .credit-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient);
        }
        
        .credit-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--card-shadow);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--glass-border);
        }
        
        .card-brand {
            font-weight: 700;
            color: var(--primary-light);
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1.3rem;
        }
        
        .card-brand i {
            font-size: 1.8rem;
        }
        
        .card-number-display {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            margin: 2rem 0;
            letter-spacing: 1.5px;
            word-spacing: 0.8rem;
            font-weight: 500;
            color: var(--light);
        }
        
        body.light-mode .card-number-display {
            color: var(--dark);
        }
        
        .card-info {
            display: flex;
            justify-content: space-between;
            font-size: 1.1rem;
            color: var(--gray);
            margin-bottom: 1.5rem;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 3rem;
            right: 3rem;
            background: var(--dark);
            color: var(--white);
            padding: 1.5rem 2.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            display: flex;
            align-items: center;
            gap: 1.5rem;
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition);
            z-index: 1000;
            max-width: 450px;
            backdrop-filter: var(--blur);
            border: 1px solid var(--glass-border);
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .toast i {
            font-size: 1.8rem;
        }
        
        .toast-success {
            background: rgba(0, 184, 148, 0.2);
            border-left: 5px solid var(--success);
        }
        
        .toast-error {
            background: rgba(214, 48, 49, 0.2);
            border-left: 5px solid var(--danger);
        }
        
        .toast-warning {
            background: rgba(253, 203, 110, 0.2);
            border-left: 5px solid var(--warning);
        }
        
        .toast-info {
            background: rgba(108, 92, 231, 0.2);
            border-left: 5px solid var(--primary);
        }
        
        /* Validation Result */
        .validation-result {
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 10px;
            font-weight: 500;
            display: none;
            align-items: center;
            gap: 1rem;
        }
        
        .validation-valid {
            background-color: rgba(0, 184, 148, 0.2);
            color: #00b894;
            border-left: 4px solid #00b894;
        }
        
        .validation-invalid {
            background-color: rgba(214, 48, 49, 0.2);
            color: #d63031;
            border-left: 4px solid #d63031;
        }
        
        /* Dark Mode Toggle */
        .theme-toggle {
            position: fixed;
            bottom: 3rem;
            right: 3rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 100;
            transition: var(--transition);
            border: none;
            font-size: 1.5rem;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1) rotate(30deg);
        }
        
        /* Floating Action Button */
        .fab-button {
            position: fixed;
            bottom: 3rem;
            left: 3rem;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: var(--gradient);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 15px 35px rgba(108, 92, 231, 0.5);
            z-index: 100;
            transition: var(--transition);
            border: none;
            font-size: 1.8rem;
        }
        
        .fab-button:hover {
            transform: scale(1.1) rotate(15deg);
        }
        
        /* Particles Background */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            background: var(--primary-light);
            border-radius: 50%;
            opacity: 0.1;
            animation: float-particle 15s infinite linear;
        }
        
        @keyframes float-particle {
            0% { transform: translateY(0) translateX(0); opacity: 0; }
            50% { opacity: 0.2; }
            100% { transform: translateY(-100vh) translateX(100px); opacity: 0; }
        }
        
        /* Responsive Adjustments */
        @media (max-width: 1200px) {
            .container {
                padding: 2.5rem;
            }
        }
        
        @media (max-width: 992px) {
            .container {
                padding: 2rem;
            }
            
            .logo {
                font-size: 3.5rem;
            }
            
            .generator-section {
                grid-template-columns: 1fr;
            }
            
            .card-preview {
                height: 320px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
            }
            
            .logo {
                font-size: 3rem;
            }
            
            .input-row {
                flex-direction: column;
                gap: 2rem;
            }
            
            .action-buttons {
                width: 100%;
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .btn {
                width: 100%;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .card-number-preview {
                font-size: 1.8rem;
            }
            
            .theme-toggle, .fab-button {
                width: 55px;
                height: 55px;
                font-size: 1.3rem;
                bottom: 2rem;
            }
            
            .fab-button {
                left: 2rem;
            }
            
            .theme-toggle {
                right: 2rem;
            }
        }
        
        @media (max-width: 576px) {
            .container {
                padding: 1.5rem 1rem;
            }
            
            .logo {
                font-size: 2.5rem;
            }
            
            .logo-badge {
                top: -10px;
                right: -20px;
                font-size: 0.7rem;
                padding: 0.2rem 0.8rem;
            }
            
            .subtitle {
                font-size: 1rem;
                padding: 1.2rem;
            }
            
            .generator-card, .results {
                padding: 2rem;
            }
            
            .card-preview {
                height: 280px;
                padding: 2rem;
            }
            
            .card-number-preview {
                font-size: 1.5rem;
            }
            
            .toast {
                bottom: 2rem;
                right: 2rem;
                left: 2rem;
                max-width: calc(100% - 4rem);
                padding: 1.2rem 2rem;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <header>
            <h1 class="logo">QuantumGen<span class="logo-badge">PRO</span></h1>
            <p class="subtitle">O gerador de cartões mais avançado do mercado com visualização 3D holográfica e tecnologia quântica para desenvolvimento e testes</p>
        </header>
        
        <div class="card-preview-container" id="card-preview-container">
            <div class="card-preview" id="card-preview">
                <div class="card-front">
                    <div class="card-hologram"></div>
                    <div class="card-logo">
                        <div class="card-chip">
                            <i class="fas fa-microchip"></i>
                        </div>
                        <div class="card-brand" id="preview-card-type">
                            <i class="fab fa-cc-visa"></i> VISA
                        </div>
                    </div>
                    <div class="card-number-preview" id="preview-card-number">4532 7589 6541 2368</div>
                    <div class="card-details-preview">
                        <div>
                            <div class="card-label">TITULAR DO CARTÃO</div>
                            <div class="card-value" id="preview-card-holder">JOHN DOE</div>
                        </div>
                        <div>
                            <div class="card-label">VALIDADE</div>
                            <div class="card-value" id="preview-card-expiry">12/25</div>
                        </div>
                    </div>
                </div>
                <div class="card-back">
                    <div class="card-magnetic-stripe"></div>
                    <div class="card-signature" id="preview-card-signature">John Doe</div>
                    <div class="card-cvv">
                        <div class="card-label">CVV</div>
                        <div class="card-value" id="preview-card-cvv">123</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="generator-section">
            <div class="generator-card">
                <h3 class="card-title"><i class="fas fa-credit-card"></i> Gerador Automático</h3>
                
                <div class="form-group">
                    <label for="card-type">Tipo de Cartão</label>
                    <select id="card-type">
                        <option value="visa">Visa</option>
                        <option value="mastercard">Mastercard</option>
                        <option value="amex">American Express</option>
                        <option value="discover">Discover</option>
                        <option value="jcb">JCB</option>
                        <option value="diners">Diners Club</option>
                        <option value="unionpay">UnionPay</option>
                        <option value="maestro">Maestro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="card-count">Quantidade de Cartões</label>
                    <input type="number" id="card-count" min="1" max="100" value="5">
                </div>
                
                <div class="form-group">
                    <label for="country">País de Emissão</label>
                    <select id="country">
                        <option value="br">Brasil</option>
                        <option value="us">Estados Unidos</option>
                        <option value="uk">Reino Unido</option>
                        <option value="ca">Canadá</option>
                        <option value="au">Austrália</option>
                        <option value="jp">Japão</option>
                        <option value="eu">Europa (Zona Euro)</option>
                    </select>
                </div>
                
                <button id="generate-btn" class="btn btn-primary btn-block">
                    <i class="fas fa-bolt"></i> Gerar Cartões
                </button>
            </div>
            
            <div class="generator-card">
                <h3 class="card-title"><i class="fas fa-barcode"></i> Gerador por BIN</h3>
                
                <div class="form-group">
                    <label for="bin">BIN (6-12 dígitos)</label>
                    <input type="text" id="bin" placeholder="Ex: 411111, 555555, 378282" maxlength="12" pattern="\d*">
                </div>
                
                <div class="input-row">
                    <div class="form-group">
                        <label for="exp-month">Mês</label>
                        <select id="exp-month">
                            <option value="01">01</option>
                            <option value="02">02</option>
                            <option value="03">03</option>
                            <option value="04">04</option>
                            <option value="05">05</option>
                            <option value="06">06</option>
                            <option value="07">07</option>
                            <option value="08">08</option>
                            <option value="09">09</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="exp-year">Ano</label>
                        <select id="exp-year">
                            <option value="23">2023</option>
                            <option value="24">2024</option>
                            <option value="25">2025</option>
                            <option value="26">2026</option>
                            <option value="27">2027</option>
                            <option value="28">2028</option>
                            <option value="29">2029</option>
                            <option value="30">2030</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="bin-count">Quantidade</label>
                    <input type="number" id="bin-count" min="1" max="100" value="3">
                </div>
                
                <button id="generate-bin-btn" class="btn btn-primary btn-block">
                    <i class="fas fa-magic"></i> Gerar com BIN
                </button>
            </div>
        </div>
        
        <div class="results">
            <div class="section-header">
                <h3 class="section-title"><i class="fas fa-list-ul"></i> Cartões Gerados</h3>
                <div class="action-buttons">
                    <button id="copy-all-btn" class="btn btn-warning">
                        <i class="fas fa-copy"></i> Copiar Todos
                    </button>
                    <button id="export-json-btn" class="btn btn-success">
                        <i class="fas fa-file-export"></i> Exportar JSON
                    </button>
                    <button id="clear-btn" class="btn btn-danger">
                        <i class="fas fa-trash"></i> Limpar
                    </button>
                </div>
            </div>
            
            <div id="validation-result" class="validation-result">
                <i class="fas fa-check-circle"></i>
                <span id="validation-message">Resultado da validação aparecerá aqui</span>
            </div>
            
            <div class="cards-grid" id="card-list"></div>
        </div>
    </div>
    
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toast-message">Operação realizada com sucesso!</span>
    </div>
    
    <button class="theme-toggle" id="theme-toggle">
        <i class="fas fa-moon"></i>
    </button>
    
    <button class="fab-button" id="help-button">
        <i class="fas fa-question"></i>
    </button>

    <script>
        // Bancos de dados avançados para geração de dados
        const firstNames = {
            br: ['João', 'Maria', 'Pedro', 'Ana', 'Carlos', 'Mariana', 'Lucas', 'Juliana', 'Fernando', 'Patrícia', 'Ricardo', 'Camila', 'Gustavo', 'Amanda', 'Rafael'],
            us: ['John', 'Mary', 'James', 'Jennifer', 'Robert', 'Linda', 'Michael', 'Elizabeth', 'William', 'Susan', 'David', 'Sarah', 'Richard', 'Jessica', 'Joseph'],
            uk: ['Oliver', 'Amelia', 'George', 'Isla', 'Harry', 'Ava', 'Jack', 'Emily', 'Jacob', 'Sophia', 'Charlie', 'Grace', 'Thomas', 'Mia', 'Oscar'],
            ca: ['Liam', 'Emma', 'Noah', 'Olivia', 'Benjamin', 'Ava', 'Lucas', 'Charlotte', 'William', 'Sophia', 'Alexander', 'Isabella', 'James', 'Mia', 'Elijah'],
            au: ['Oliver', 'Charlotte', 'William', 'Olivia', 'Jack', 'Ava', 'Noah', 'Amelia', 'Thomas', 'Isla', 'Lucas', 'Mia', 'James', 'Sophia', 'Henry'],
            jp: ['Hiroshi', 'Yuki', 'Kenji', 'Aiko', 'Takashi', 'Hana', 'Naoki', 'Sakura', 'Daiki', 'Mei', 'Haruto', 'Rin', 'Yuta', 'Yui', 'Kaito'],
            eu: ['Luca', 'Sophie', 'Leon', 'Emma', 'Finn', 'Marie', 'Elias', 'Anna', 'Ben', 'Lea', 'Paul', 'Laura', 'Louis', 'Lina', 'Max']
        };
        
        const lastNames = {
            br: ['Silva', 'Santos', 'Oliveira', 'Souza', 'Rodrigues', 'Ferreira', 'Alves', 'Pereira', 'Lima', 'Gomes', 'Costa', 'Ribeiro', 'Martins', 'Carvalho'],
            us: ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Miller', 'Davis', 'Garcia', 'Rodriguez', 'Wilson', 'Martinez', 'Anderson', 'Taylor', 'Thomas'],
            uk: ['Smith', 'Jones', 'Taylor', 'Brown', 'Williams', 'Wilson', 'Johnson', 'Davies', 'Robinson', 'Wright', 'Thompson', 'Evans', 'Walker', 'White'],
            ca: ['Smith', 'Brown', 'Tremblay', 'Martin', 'Roy', 'Gagnon', 'Lee', 'Wilson', 'Johnson', 'MacDonald', 'Taylor', 'Campbell', 'Anderson', 'Jones'],
            au: ['Smith', 'Jones', 'Williams', 'Brown', 'Wilson', 'Taylor', 'Johnson', 'Lee', 'Martin', 'White', 'Anderson', 'Thompson', 'Nguyen', 'Walker'],
            jp: ['Sato', 'Suzuki', 'Takahashi', 'Tanaka', 'Watanabe', 'Ito', 'Yamamoto', 'Nakamura', 'Kobayashi', 'Kato', 'Yoshida', 'Yamada', 'Sasaki', 'Yamaguchi'],
            eu: ['Müller', 'Schmidt', 'Schneider', 'Fischer', 'Weber', 'Meyer', 'Wagner', 'Becker', 'Schulz', 'Hoffmann', 'Schäfer', 'Koch', 'Bauer', 'Richter']
        };
        
        const cardTypes = {
            visa: {
                name: 'Visa',
                icon: 'fa-cc-visa',
                color: '#1a1f71',
                gradient: 'linear-gradient(135deg, #1a1f71, #4361ee)',
                pattern: /^4/,
                lengths: [16],
                validLengths: [16]
            },
            mastercard: {
                name: 'Mastercard',
                icon: 'fa-cc-mastercard',
                color: '#eb001b',
                gradient: 'linear-gradient(135deg, #eb001b, #f79e1b)',
                pattern: /^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[0-2])/,
                lengths: [16],
                validLengths: [16]
            },
            amex: {
                name: 'American Express',
                icon: 'fa-cc-amex',
                color: '#016FD0',
                gradient: 'linear-gradient(135deg, #016FD0, #00CCD6)',
                pattern: /^(34|37)/,
                lengths: [15],
                validLengths: [15],
                cvvLength: 4
            },
            discover: {
                name: 'Discover',
                icon: 'fa-cc-discover',
                color: '#ff6000',
                gradient: 'linear-gradient(135deg, #ff6000, #ffa800)',
                pattern: /^(6011|64[4-9]|65)/,
                lengths: [16],
                validLengths: [16]
            },
            jcb: {
                name: 'JCB',
                icon: 'fa-cc-jcb',
                color: '#30659B',
                gradient: 'linear-gradient(135deg, #30659B, #00B2E2)',
                pattern: /^(352[8-9]|35[3-8])/,
                lengths: [16],
                validLengths: [16]
            },
            diners: {
                name: 'Diners Club',
                icon: 'fa-cc-diners-club',
                color: '#0079BE',
                gradient: 'linear-gradient(135deg, #0079BE, #00A3E0)',
                pattern: /^(30[0-5]|36|38|39)/,
                lengths: [14],
                validLengths: [14]
            },
            unionpay: {
                name: 'UnionPay',
                icon: 'fa-cc-stripe',
                color: '#046FDB',
                gradient: 'linear-gradient(135deg, #046FDB, #00A0E9)',
                pattern: /^(62|81)/,
                lengths: [16],
                validLengths: [16]
            },
            maestro: {
                name: 'Maestro',
                icon: 'fa-cc-mastercard',
                color: '#0061A8',
                gradient: 'linear-gradient(135deg, #0061A8, #00A3E0)',
                pattern: /^(5018|5020|5038|5893|6304|6759|6761|6762|6763)/,
                lengths: [16],
                validLengths: [16]
            }
        };
        
        // Elementos DOM
        const cardTypeSelect = document.getElementById('card-type');
        const cardCountInput = document.getElementById('card-count');
        const generateBtn = document.getElementById('generate-btn');
        const binInput = document.getElementById('bin');
        const expMonthSelect = document.getElementById('exp-month');
        const expYearSelect = document.getElementById('exp-year');
        const binCountInput = document.getElementById('bin-count');
        const generateBinBtn = document.getElementById('generate-bin-btn');
        const cardList = document.getElementById('card-list');
        const copyAllBtn = document.getElementById('copy-all-btn');
        const exportJsonBtn = document.getElementById('export-json-btn');
        const clearBtn = document.getElementById('clear-btn');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const themeToggle = document.getElementById('theme-toggle');
        const helpButton = document.getElementById('help-button');
        const cardPreviewContainer = document.getElementById('card-preview-container');
        const cardPreview = document.getElementById('card-preview');
        const previewCardType = document.getElementById('preview-card-type');
        const previewCardNumber = document.getElementById('preview-card-number');
        const previewCardHolder = document.getElementById('preview-card-holder');
        const previewCardExpiry = document.getElementById('preview-card-expiry');
        const previewCardCvv = document.getElementById('preview-card-cvv');
        const previewCardSignature = document.getElementById('preview-card-signature');
        const countrySelect = document.getElementById('country');
        const particlesContainer = document.getElementById('particles');
        const validationResult = document.getElementById('validation-result');
        const validationMessage = document.getElementById('validation-message');
        
        // Variáveis de estado
        let currentCards = [];
        let isDragging = false;
        let startX, startY, startRotateX, startRotateY;
        let isFlipped = false;
        let lastGeneratedType = 'visa';
        
        // Criar partículas de fundo
        function createParticles() {
            const particleCount = Math.floor(window.innerWidth / 10);
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                const size = Math.random() * 10 + 5;
                const posX = Math.random() * window.innerWidth;
                const posY = Math.random() * window.innerHeight * 2;
                const delay = Math.random() * 15;
                const duration = Math.random() * 10 + 10;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}px`;
                particle.style.top = `${posY}px`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                
                particlesContainer.appendChild(particle);
            }
        }
        
        // Gerar um dígito aleatório
        function randomDigit() {
            return Math.floor(Math.random() * 10);
        }
        
        // Implementação do algoritmo de Luhn para validação
        function luhnCheck(cardNum) {
            // Remover todos os caracteres não numéricos
            cardNum = cardNum.replace(/\D/g, '');
            
            // Verificar se tem comprimento válido
            const cardType = detectCardTypeByBin(cardNum.substring(0, 6));
            const validLengths = cardType ? cardTypes[cardType].validLengths : [13, 14, 15, 16, 19];
            
            if (!validLengths.includes(cardNum.length)) {
                return false;
            }
            
            let sum = 0;
            let shouldDouble = false;
            
            // Percorrer os dígitos da direita para a esquerda
            for (let i = cardNum.length - 1; i >= 0; i--) {
                let digit = parseInt(cardNum.charAt(i));
                
                if (shouldDouble) {
                    digit *= 2;
                    if (digit > 9) {
                        digit -= 9;
                    }
                }
                
                sum += digit;
                shouldDouble = !shouldDouble;
            }
            
            return (sum % 10) === 0;
        }
        
        // Verificar se o tamanho do cartão é válido para o tipo
        function isValidCardLength(cardNumber, type) {
            const cardType = cardTypes[type];
            if (!cardType || !cardType.validLengths) return true;
            
            const cleanNumber = cardNumber.replace(/\D/g, '');
            return cardType.validLengths.includes(cleanNumber.length);
        }
        
        // Gerar um número de cartão válido usando o algoritmo de Luhn
        function generateCardNumber(type, bin = '') {
            const cardType = cardTypes[type];
            let cardNumber = '';
            
            // Determinar o comprimento do cartão
            const possibleLengths = cardType.validLengths || cardType.lengths || [16];
            const cardLength = possibleLengths[Math.floor(Math.random() * possibleLengths.length)];
            
            if (bin && /^\d{6,12}$/.test(bin)) {
                cardNumber = bin;
                while (cardNumber.length < cardLength - 1) {
                    cardNumber += randomDigit();
                }
            } else {
                // Usar prefixos específicos para cada tipo de cartão
                if (type === 'visa') {
                    cardNumber = '4' + Math.floor(Math.random() * 9 + 1);
                } else if (type === 'mastercard') {
                    const prefixes = ['51', '52', '53', '54', '55', '2221', '2720'];
                    cardNumber = prefixes[Math.floor(Math.random() * prefixes.length)];
                } else if (type === 'amex') {
                    cardNumber = ['34', '37'][Math.floor(Math.random() * 2)];
                } else if (type === 'discover') {
                    cardNumber = '6011';
                } else if (type === 'jcb') {
                    cardNumber = '35' + (Math.floor(Math.random() * 6) + 28);
                } else if (type === 'diners') {
                    const prefixes = ['300', '301', '302', '303', '304', '305', '36', '38', '39'];
                    cardNumber = prefixes[Math.floor(Math.random() * prefixes.length)];
                } else if (type === 'unionpay') {
                    cardNumber = ['62', '81'][Math.floor(Math.random() * 2)];
                } else if (type === 'maestro') {
                    const prefixes = ['5018', '5020', '5038', '5893', '6304', '6759', '6761', '6762', '6763'];
                    cardNumber = prefixes[Math.floor(Math.random() * prefixes.length)];
                }
                
                while (cardNumber.length < cardLength - 1) {
                    cardNumber += randomDigit();
                }
            }
            
            // Calcular o dígito de verificação usando o algoritmo de Luhn
            let sum = 0;
            let shouldDouble = false;
            
            for (let i = cardNumber.length - 1; i >= 0; i--) {
                let digit = parseInt(cardNumber.charAt(i));
                
                if (shouldDouble) {
                    digit *= 2;
                    if (digit > 9) {
                        digit -= 9;
                    }
                }
                
                sum += digit;
                shouldDouble = !shouldDouble;
            }
            
            const checkDigit = (10 - (sum % 10)) % 10;
            cardNumber += checkDigit;
            
            // Verificar novamente com Luhn e tamanho para garantir que está válido
            if (!luhnCheck(cardNumber)) {
                return generateCardNumber(type, bin);
            }
            
            if (!isValidCardLength(cardNumber, type)) {
                return generateCardNumber(type, bin);
            }
            
            return cardNumber;
        }
        
        // Formatar número do cartão para exibição
        function formatCardNumber(cardNumber, type = 'visa') {
            if (type === 'amex') {
                return cardNumber.replace(/(\d{4})(\d{6})(\d{5})/, '$1 $2 $3');
            } else if (type === 'diners') {
                return cardNumber.replace(/(\d{4})(\d{6})(\d{4})/, '$1 $2 $3');
            }
            return cardNumber.replace(/(\d{4})(?=\d)/g, '$1 ');
        }
        
        // Gerar nome aleatório baseado no país
        function generateName(country) {
            const firstName = firstNames[country][Math.floor(Math.random() * firstNames[country].length)];
            const lastName = lastNames[country][Math.floor(Math.random() * lastNames[country].length)];
            return `${firstName} ${lastName}`.toUpperCase();
        }
        
        // Atualizar visualização 3D do cartão
        function updateCardPreview(type, cardNumber, expiry, name, cvv) {
            const cardType = cardTypes[type] || cardTypes.visa;
            
            previewCardType.innerHTML = `<i class="fab ${cardType.icon}"></i> ${cardType.name}`;
            previewCardNumber.textContent = formatCardNumber(cardNumber, type);
            previewCardHolder.textContent = name;
            previewCardExpiry.textContent = expiry;
            previewCardCvv.textContent = cvv;
            previewCardSignature.textContent = name;
            
            // Atualizar gradiente do cartão
            const front = cardPreview.querySelector('.card-front');
            const back = cardPreview.querySelector('.card-back');
            front.style.background = cardType.gradient;
            back.style.background = `linear-gradient(135deg, ${cardType.color}, ${cardType.gradient.split(',')[1]})`;
            
            cardPreviewContainer.style.display = 'block';
            lastGeneratedType = type;
        }
        
        // Mostrar notificação toast
        function showToast(message, type = 'success') {
            // Reset toast classes
            toast.className = 'toast';
            toast.classList.add(`toast-${type}`);
            
            let icon;
            switch(type) {
                case 'error':
                    icon = 'fa-times-circle';
                    break;
                case 'warning':
                    icon = 'fa-exclamation-circle';
                    break;
                case 'info':
                    icon = 'fa-info-circle';
                    break;
                default:
                    icon = 'fa-check-circle';
            }
            
            toast.innerHTML = `<i class="fas ${icon}"></i><span>${message}</span>`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Verificar número do cartão usando algoritmo Luhn
        async function validateCardNumber(cardNumber) {
            validationResult.style.display = 'flex';
            validationResult.className = 'validation-result';
            validationMessage.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verificando número do cartão...';
            
            // Simular um delay para parecer que está verificando externamente
            await new Promise(resolve => setTimeout(resolve, 800));
            
            const isValid = luhnCheck(cardNumber);
            const cardType = detectCardTypeByBin(cardNumber.substring(0, 6));
            const validLength = cardType ? isValidCardLength(cardNumber, cardType) : true;
            
            if (isValid && validLength) {
                validationResult.classList.add('validation-valid');
                let message = '<i class="fas fa-check-circle"></i> Número do cartão válido pelo algoritmo Luhn!';
                
                if (cardType) {
                    message += `<br>Tipo detectado: ${cardTypes[cardType].name}`;
                    message += `<br>Tamanho válido para ${cardTypes[cardType].name}: Sim`;
                }
                
                validationMessage.innerHTML = message;
                return true;
            } else {
                validationResult.classList.add('validation-invalid');
                let message = '<i class="fas fa-times-circle"></i> Número do cartão inválido!';
                
                if (!isValid) {
                    message += '<br>Falha no algoritmo Luhn';
                }
                
                if (!validLength && cardType) {
                    message += `<br>Tamanho inválido para ${cardTypes[cardType].name}`;
                }
                
                validationMessage.innerHTML = message;
                return false;
            }
        }
        
        // Criar elemento de cartão para a lista
        function createCardElement(type, cardNumber, formattedNumber, expiry, cvv, name, country) {
            const cardType = cardTypes[type] || cardTypes.visa;
            const cardElement = document.createElement('div');
            cardElement.className = 'credit-card';
            
            cardElement.innerHTML = `
                <div class="card-header">
                    <div class="card-brand">
                        <i class="fab ${cardType.icon}"></i>
                        ${cardType.name}
                    </div>
                    <div>
                        <button class="btn btn-primary btn-sm copy-btn" data-number="${cardNumber}" data-expiry="${expiry}" data-cvv="${cvv}" data-name="${name}" data-type="${type}">
                            <i class="fas fa-copy"></i> Copiar
                        </button>
                        <button class="btn btn-success btn-sm validate-btn" data-number="${cardNumber}">
                            <i class="fas fa-check"></i> Validar
                        </button>
                    </div>
                </div>
                <div class="card-number-display">${formattedNumber}</div>
                <div class="card-info">
                    <div>${name}</div>
                    <div>${expiry} | CVV: ${cvv}</div>
                </div>
            `;
            
            // Adicionar evento de clique para visualização 3D
            cardElement.addEventListener('click', () => {
                updateCardPreview(type, cardNumber, expiry, name, cvv);
            });
            
            // Adicionar evento ao botão de copiar
            const copyBtn = cardElement.querySelector('.copy-btn');
            copyBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                const cardData = {
                    number: this.getAttribute('data-number'),
                    expiry: this.getAttribute('data-expiry'),
                    cvv: this.getAttribute('data-cvv'),
                    name: this.getAttribute('data-name'),
                    type: this.getAttribute('data-type')
                };
                
                const textToCopy = `Número: ${cardData.number}\n` +
                                   `Validade: ${cardData.expiry}\n` +
                                   `CVV: ${cardData.cvv}\n` +
                                   `Titular: ${cardData.name}\n` +
                                   `Tipo: ${cardTypes[cardData.type].name}`;
                
                navigator.clipboard.writeText(textToCopy).then(() => {
                    showToast('Dados do cartão copiados!');
                }).catch(err => {
                    showToast('Erro ao copiar dados', 'error');
                    console.error('Erro ao copiar:', err);
                });
            });
            
            // Adicionar evento ao botão de validar
            const validateBtn = cardElement.querySelector('.validate-btn');
            validateBtn.addEventListener('click', async function(e) {
                e.stopPropagation();
                const cardNumber = this.getAttribute('data-number');
                await validateCardNumber(cardNumber);
            });
            
            cardList.appendChild(cardElement);
            
            return {
                type,
                cardNumber,
                formattedNumber,
                expiry, 
                cvv,
                name,
                country
            };
        }
        
        // Gerar cartões com base no tipo
        function generateCards() {
            const type = cardTypeSelect.value;
            const count = parseInt(cardCountInput.value);
            const country = countrySelect.value;
            
            if (count > 100) {
                showToast('Quantidade máxima é 100 cartões por vez', 'error');
                return;
            }
            
            if (count < 1) {
                showToast('Quantidade mínima é 1 cartão', 'error');
                return;
            }
            
            // Mostrar loading no botão
            const originalText = generateBtn.innerHTML;
            generateBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Gerando...`;
            generateBtn.disabled = true;
            
            // Limpar lista existente
            cardList.innerHTML = '';
            currentCards = [];
            
            // Usar setTimeout para permitir a atualização da UI
            setTimeout(() => {
                try {
                    for (let i = 0; i < count; i++) {
                        const cardNumber = generateCardNumber(type);
                        const formattedNumber = formatCardNumber(cardNumber, type);
                        const expiry = generateExpiryDate(
                            ('0' + (Math.floor(Math.random() * 12) + 1)).slice(-2),
                            (new Date().getFullYear() + Math.floor(Math.random() * 5) + 1).toString().substr(-2)
                        );
                        const cvv = generateCvv(type);
                        const name = generateName(country);
                        
                        const cardData = createCardElement(type, cardNumber, formattedNumber, expiry, cvv, name, country);
                        currentCards.push(cardData);
                    }
                    
                    // Exibir visualização do primeiro cartão
                    if (currentCards.length > 0) {
                        updateCardPreview(
                            currentCards[0].type,
                            currentCards[0].cardNumber,
                            currentCards[0].expiry,
                            currentCards[0].name,
                            currentCards[0].cvv
                        );
                    }
                    
                    showToast(`${count} cartões ${cardTypes[type].name} gerados!`);
                } catch (error) {
                    showToast('Erro ao gerar cartões', 'error');
                    console.error('Erro ao gerar cartões:', error);
                } finally {
                    // Restaurar botão
                    generateBtn.innerHTML = originalText;
                    generateBtn.disabled = false;
                }
            }, 100);
        }
        
        // Gerar data de validade
        function generateExpiryDate(month, year) {
            return `${month}/${year}`;
        }
        
        // Gerar CVV
        function generateCvv(type) {
            const length = cardTypes[type]?.cvvLength || 3;
            let cvv = '';
            for (let i = 0; i < length; i++) {
                cvv += randomDigit();
            }
            return cvv;
        }
        
        // Gerar cartões com BIN específico
        function generateCardsWithBin() {
            const bin = binInput.value;
            const count = parseInt(binCountInput.value);
            const month = expMonthSelect.value;
            const year = expYearSelect.value;
            const country = countrySelect.value;
            
            if (!/^\d{6,12}$/.test(bin)) {
                showToast('BIN deve conter 6 a 12 dígitos!', 'error');
                return;
            }
            
            if (count > 100) {
                showToast('Quantidade máxima é 100 cartões por vez para BIN', 'error');
                return;
            }
            
            if (count < 1) {
                showToast('Quantidade mínima é 1 cartão', 'error');
                return;
            }
            
            // Mostrar loading no botão
            const originalText = generateBinBtn.innerHTML;
            generateBinBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Gerando...`;
            generateBinBtn.disabled = true;
            
            // Limpar lista existente
            cardList.innerHTML = '';
            currentCards = [];
            
            // Usar setTimeout para permitir a atualização da UI
            setTimeout(() => {
                try {
                    const type = detectCardTypeByBin(bin) || cardTypeSelect.value;
                    
                    for (let i = 0; i < count; i++) {
                        const cardNumber = generateCardNumber(type, bin);
                        const formattedNumber = formatCardNumber(cardNumber, type);
                        const expiry = generateExpiryDate(month, year);
                        const cvv = generateCvv(type);
                        const name = generateName(country);
                        
                        const cardData = createCardElement(type, cardNumber, formattedNumber, expiry, cvv, name, country);
                        currentCards.push(cardData);
                    }
                    
                    // Exibir visualização do primeiro cartão
                    if (currentCards.length > 0) {
                        updateCardPreview(
                            currentCards[0].type,
                            currentCards[0].cardNumber,
                            currentCards[0].expiry,
                            currentCards[0].name,
                            currentCards[0].cvv
                        );
                    }
                    
                    showToast(`${count} cartões com BIN ${bin} gerados!`);
                } catch (error) {
                    showToast('Erro ao gerar cartões com BIN', 'error');
                    console.error('Erro ao gerar cartões com BIN:', error);
                } finally {
                    // Restaurar botão
                    generateBinBtn.innerHTML = originalText;
                    generateBinBtn.disabled = false;
                }
            }, 100);
        }
        
        // Detectar tipo de cartão pelo BIN
        function detectCardTypeByBin(bin) {
            if (!bin) return null;
            
            for (const [type, data] of Object.entries(cardTypes)) {
                if (data.pattern.test(bin)) {
                    return type;
                }
            }
            
            return null;
        }
        
        // Copiar todos os cartões
        function copyAllCards() {
            if (currentCards.length === 0) {
                showToast('Nenhum cartão para copiar!', 'warning');
                return;
            }
            
            let allCardsText = '';
            currentCards.forEach((card, index) => {
                allCardsText += `Cartão ${index + 1}\n` +
                                `Tipo: ${cardTypes[card.type].name}\n` +
                                `Número: ${card.cardNumber}\n` +
                                `Validade: ${card.expiry}\n` +
                                `CVV: ${card.cvv}\n` +
                                `Titular: ${card.name}\n` +
                                `País: ${getCountryName(card.country)}\n\n`;
            });
            
            navigator.clipboard.writeText(allCardsText.trim()).then(() => {
                showToast('Todos os cartões copiados!');
            }).catch(err => {
                showToast('Erro ao copiar cartões', 'error');
                console.error('Erro ao copiar cartões:', err);
            });
        }
        
        // Exportar cartões como JSON
        function exportCardsToJson() {
            if (currentCards.length === 0) {
                showToast('Nenhum cartão para exportar!', 'warning');
                return;
            }
            
            try {
                const exportData = {
                    generatedAt: new Date().toISOString(),
                    count: currentCards.length,
                    cards: currentCards.map(card => ({
                        type: card.type,
                        typeName: cardTypes[card.type].name,
                        number: card.cardNumber,
                        expiry: card.expiry,
                        cvv: card.cvv,
                        name: card.name,
                        country: card.country,
                        countryName: getCountryName(card.country),
                        formattedNumber: card.formattedNumber,
                        luhnValid: luhnCheck(card.cardNumber),
                        validLength: isValidCardLength(card.cardNumber, card.type)
                    }))
                };
                
                const dataStr = JSON.stringify(exportData, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `quantumgen-cards-${new Date().toISOString().slice(0,10)}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                showToast('Cartões exportados como JSON!');
            } catch (error) {
                showToast('Erro ao exportar cartões', 'error');
                console.error('Erro ao exportar cartões:', error);
            }
        }
        
        // Obter nome do país
        function getCountryName(code) {
            const countries = {
                br: 'Brasil',
                us: 'Estados Unidos',
                uk: 'Reino Unido',
                ca: 'Canadá',
                au: 'Austrália',
                jp: 'Japão',
                eu: 'Europa'
            };
            return countries[code] || code;
        }
        
        // Limpar todos os cartões
        function clearAll() {
            cardList.innerHTML = '';
            currentCards = [];
            cardPreviewContainer.style.display = 'none';
            validationResult.style.display = 'none';
            showToast('Todos os cartões foram removidos.');
        }
        
        // Alternar modo escuro/claro
        function toggleDarkMode() {
            document.body.classList.toggle('light-mode');
            const icon = themeToggle.querySelector('i');
            
            if (document.body.classList.contains('light-mode')) {
                icon.className = 'fas fa-moon';
                localStorage.setItem('darkMode', 'disabled');
            } else {
                icon.className = 'fas fa-sun';
                localStorage.setItem('darkMode', 'enabled');
            }
        }
        
        // Verificar preferência de modo escuro
        function checkDarkModePreference() {
            if (localStorage.getItem('darkMode') === 'disabled') {
                document.body.classList.add('light-mode');
                themeToggle.querySelector('i').className = 'fas fa-moon';
            } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
                document.body.classList.add('light-mode');
                themeToggle.querySelector('i').className = 'fas fa-moon';
                localStorage.setItem('darkMode', 'disabled');
            } else {
                localStorage.setItem('darkMode', 'enabled');
            }
        }
        
        // Configurar interações 3D
        function setup3DInteractions() {
            cardPreview.addEventListener('mousedown', (e) => {
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                cardPreview.style.cursor = 'grabbing';
                
                // Salvar a rotação atual
                const transform = window.getComputedStyle(cardPreview).getPropertyValue('transform');
                if (transform !== 'none') {
                    const values = transform.split('(')[1].split(')')[0].split(',');
                    const a = values[0];
                    const b = values[1];
                    const angle = Math.round(Math.atan2(b, a) * (180/Math.PI));
                    startRotateY = angle;
                } else {
                    startRotateY = 0;
                }
            });
            
            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                const deltaX = e.clientX - startX;
                const deltaY = e.clientY - startY;
                
                const rotateY = startRotateY + deltaX / 4;
                const rotateX = -deltaY / 4;
                
                if (!isFlipped) {
                    cardPreview.style.transform = `rotateY(${rotateY}deg) rotateX(${rotateX}deg)`;
                } else {
                    cardPreview.style.transform = `rotateY(180deg) rotateX(${rotateX}deg)`;
                }
            });
            
            document.addEventListener('mouseup', () => {
                isDragging = false;
                cardPreview.style.cursor = 'pointer';
                
                // Retornar suavemente à posição original
                if (!isFlipped) {
                    cardPreview.style.transition = 'transform 0.8s cubic-bezier(0.18, 0.89, 0.32, 1.28)';
                    cardPreview.style.transform = 'rotateY(0) rotateX(0)';
                    
                    setTimeout(() => {
                        cardPreview.style.transition = 'transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
                    }, 800);
                }
            });
            
            // Alternar entre frente e verso
            cardPreview.addEventListener('click', (e) => {
                if (isDragging) {
                    isDragging = false;
                    return;
                }
                
                isFlipped = !isFlipped;
                if (isFlipped) {
                    cardPreview.style.transform = 'rotateY(180deg)';
                } else {
                    cardPreview.style.transform = 'rotateY(0)';
                }
            });
        }
        
        // Mostrar ajuda
        function showHelp() {
            showToast('Clique em um cartão para visualização 3D. Arraste para girar! Clique no cartão 3D para virar.', 'info');
        }
        
        // Inicialização
        function init() {
            checkDarkModePreference();
            createParticles();
            setup3DInteractions();
            
            // Event listeners com prevenção de comportamento padrão
            if (generateBtn) {
                generateBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    generateCards();
                });
            }

            if (generateBinBtn) {
                generateBinBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    generateCardsWithBin();
                });
            }

            if (copyAllBtn) {
                copyAllBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    copyAllCards();
                });
            }

            if (exportJsonBtn) {
                exportJsonBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    exportCardsToJson();
                });
            }

            if (clearBtn) {
                clearBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    clearAll();
                });
            }

            if (themeToggle) {
                themeToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    toggleDarkMode();
                });
            }

            if (helpButton) {
                helpButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    showHelp();
                });
            }
            
            // Detectar tipo de cartão quando o BIN é digitado
            if (binInput) {
                binInput.addEventListener('input', function() {
                    const type = detectCardTypeByBin(this.value);
                    if (type) {
                        cardTypeSelect.value = type;
                    }
                });
                
                binInput.addEventListener('keypress', function(e) {
                    if (!/\d/.test(e.key)) {
                        e.preventDefault();
                    }
                });
            }
            
            // Gerar alguns cartões ao carregar
            setTimeout(() => {
                if (generateBtn) {
                    generateCards();
                }
            }, 500);
        }

        // Garantir que o DOM esteja totalmente carregado
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
